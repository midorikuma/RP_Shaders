const int WIDTH = 128;
const int HEIGHT = 128;

const int opacityData1[] = int[](
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,-8388608,0,0,8191,-524288,0,0,65535,-32768,0,0,524032,8380416,0,0,4186112,523264,0,0,16711680,65280,0,0,33030144,8128,0,0,132120576,1008,0,0,528482304,504,0,0,1056964608,124,0,0,2080374784,63,0,1,-268435456,15,-2147483648,3,-536870909,-536870905,-1073741824,7,-1073741821,-536870911,-536870912,15,-2147483393,-16777216,-268435456,30,4095,-1048576,2013265920,60,16383,-131072,1006632960,120,131071,-32768,503316480,240,262143,-8192,251658240,480,1048575,-4096,125829120,480,4194303,-1024,62914560,960,8388607,-512,29360128,1920,16777215,-256,31457280,1792,33554431,-64,15728640,3840,67108863,-32,7864320,7680,134217727,-16,7864320,7168,268435455,-8,3932160,15360,536870911,-4,1835008,14336,1073741823,-4,1966080,28672,2147483647,-2,917504,28672,2147483647,-1,983040,61440,-1,-1,458752,57345,-1,-1,-2147024896,57345,-1,-1,-1073512448,114691,-1,-1,-1073512448,114691,-1,-1,-536625152,114695,-1,-1,-536756224,229383,-1,-1,-268320768,229391,-1,-1,-268320768,229391,-1,-1,-268378112,458767,-1,-1,-134160384,458767,-1,-1,-1024,458783,-1,-1,-128,458783,-1,-1,-64,458783,-1,-1,-32,458783,-1,-1,-16,917535,-1,-1,-8,917567,-1,-1,-4,917567,-1,-1,-4,917567,-1,-1,-4,917567,-1,-1,-4,917567,-1,-1,-4,917567,-1,-1,-4,917567,-1,-1,-4,917567,-1,-1,-4,917567,-1,-1,-4,393279,-1,-1,-8,458815,-1,-1,-8,458783,-1,-1,-16,458783,-1,-1,-32,458783,-1,-1,-64,458783,-1,-1,-256,458767,-1,-1,-134160384,229391,-1,-1,-268378112,229391,-1,-1,-268312576,229383,-1,-1,-268320768,229383,-1,-1,-536756224,114695,-1,-1,-536756224,114691,-1,-1,-1073512448,122883,-1,-1,-1073512448,57345,-1,-1,-2146992128,57344,-1,-1,-2147024896,28672,-1,-1,458752,28672,2147483647,-2,917504,30720,1073741823,-2,917504,14336,1073741823,-4,1966080,15360,536870911,-8,3932160,7680,268435455,-16,3670016,3584,134217727,-32,7864320,3840,67108863,-64,15728640,1920,33554431,-128,15728640,896,16777215,-256,31457280,448,4194303,-512,62914560,480,2097151,-2048,125829120,240,524287,-4096,125829120,120,262143,-16384,251658240,60,65535,-65536,503316480,30,8191,-524288,1006632960,31,1023,-4194304,2013265920,7,-2147483617,-134217727,-268435456,3,-1073741824,3,-536870912,1,-268435456,7,-1073741824,0,-134217728,31,0,0,1040187392,62,0,0,528482304,248,0,0,264241152,1008,0,0,66060288,4064,0,0,16646144,16256,0,0,8372224,130560,0,0,1047552,2095104,0,0,262128,268419072,0,0,32767,-131072,0,0,1023,-2097152,0,0,7,-268435456,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
);

const int colorDecisionData1[] = int[](
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,-268435456,0,0,255,-16777216,0,0,2047,-2097152,0,0,8191,-262144,0,0,32767,-65536,0,0,131071,-32768,0,0,524287,-8192,0,0,1048575,-4096,0,0,2097151,-1024,0,0,4194303,-512,0,0,8388607,-256,0,0,16777215,-128,0,0,33554431,-128,0,0,67108863,-64,0,0,67108863,-32,0,0,134217727,-32,0,0,268435455,-16,0,0,268435455,-8,0,0,536870911,-8,0,0,536870911,-4,0,0,1073741823,-4,0,0,1073741823,-4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,63,-1,-1,-512,63,-61441,-983041,-256,0,-261121,-4177921,-128,0,-523777,-8380417,-128,0,-1048321,-16773121,-128,0,-1968001,-31488001,-128,0,-1573249,-25171969,-128,0,-1048705,-16779265,-128,0,-1,-1,-256,0,-1,-1,-512,0,2080374784,31,0,0,2080374784,31,0,0,2080374784,62,0,0,2080374784,62,0,0,1040187392,62,0,0,1040449535,-8068,0,0,1057226751,-16260,0,0,520224767,-32516,0,0,528547839,-32520,0,0,260112383,-65032,0,0,264257535,-130064,0,0,132128767,-261136,0,0,133173247,-1046560,0,0,66585599,-4190272,0,0,33292543,-16769088,0,0,16646175,-134201472,0,0,16711680,32512,0,0,8355840,130560,0,0,4186112,261120,0,0,1046528,1046528,0,0,523776,8384512,0,0,262112,134201344,0,0,65535,-65536,0,0,16383,-131072,0,0,4095,-524288,0,0,511,-4194304,0,0,31,-67108864,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
);

const int opacityData2[] = int[](
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,127,-33554432,0,0,4095,-1048576,0,0,65535,-65536,0,0,262143,-16384,0,0,2097151,-2048,0,0,8388607,-512,0,0,33554431,-128,0,0,67108863,-64,0,0,268435455,-16,0,0,536870911,-8,0,0,2147483647,-2,0,0,-1,-1,0,1,-1,-1,-2147483648,3,-1,-1,-1073741824,7,-1,-1,-536870912,15,-1,-1,-268435456,31,-1,-1,-134217728,63,-1,-1,-67108864,127,-1,-1,-33554432,255,-1,-1,-16777216,255,-1,-1,-16777216,511,-1,-1,-8388608,1023,-1,-1,-4194304,1023,-1,-1,-4194304,2047,-1,-1,-2097152,4095,-1,-1,-1048576,4095,-1,-1,-1048576,8191,-1,-1,-524288,8191,-1,-1,-524288,16383,-1,-1,-262144,16383,-1,-1,-262144,16383,-1,-1,-262144,32767,-1,-1,-131072,32767,-1,-1,-131072,65535,-1,-1,-65536,65535,-1,-1,-65536,65535,-1,-1,-65536,65535,-1,-1,-65536,131071,-1,-1,-32768,131071,-1,-1,-32768,131071,-1,-1,-32768,131071,-1,-1,-32768,131071,-1,-1,-32768,262143,-1,-1,-16384,262143,-1,-1,-16384,262143,-1,-1,-16384,262143,-1,-1,-16384,262143,-1,-1,-16384,262143,-1,-1,-16384,262143,-1,-1,-16384,262143,-1,-1,-16384,262143,-1,-1,-16384,262143,-1,-1,-16384,262143,-1,-1,-16384,262143,-1,-1,-16384,262143,-1,-1,-16384,262143,-1,-1,-16384,131071,-1,-1,-32768,131071,-1,-1,-32768,131071,-1,-1,-32768,131071,-1,-1,-32768,131071,-1,-1,-32768,65535,-1,-1,-65536,65535,-1,-1,-65536,65535,-1,-1,-65536,65535,-1,-1,-65536,32767,-1,-1,-131072,32767,-1,-1,-131072,16383,-1,-1,-262144,16383,-1,-1,-262144,16383,-1,-1,-262144,8191,-1,-1,-524288,8191,-1,-1,-524288,4095,-1,-1,-1048576,4095,-1,-1,-1048576,2047,-1,-1,-2097152,1023,-1,-1,-4194304,1023,-1,-1,-4194304,511,-1,-1,-8388608,255,-1,-1,-16777216,255,-1,-1,-16777216,127,-1,-1,-33554432,63,-1,-1,-67108864,31,-1,-1,-134217728,15,-1,-1,-268435456,7,-1,-1,-536870912,3,-1,-1,-1073741824,1,-1,-1,-2147483648,0,-1,-1,0,0,2147483647,-2,0,0,536870911,-8,0,0,268435455,-16,0,0,67108863,-64,0,0,33554431,-128,0,0,8388607,-512,0,0,2097151,-2048,0,0,262143,-16384,0,0,65535,-65536,0,0,4095,-1048576,0,0,127,-33554432,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
);

const int colorDecisionData2[] = int[](
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1879048192,0,0,196,1647312896,0,0,7104,1730150400,0,0,14784,2004484096,0,0,235972,1736146944,0,0,186820,1734041600,0,0,3856576,1733720064,0,0,6375872,7795200,0,0,29220864,325376,0,0,59146240,61216,0,0,161218560,28528,0,0,482869248,3816,0,0,348127232,1736,0,0,-616562688,414,0,1,1325400064,28,0,3,-301989888,56,0,9,-268435456,112,1879048192,6,2013265920,0,805306368,7,805306368,1,-268435456,17,-2147483648,3,-1946157056,28,-1073741824,3,503316480,54,0,1,905969664,59,0,0,2080374784,14,0,0,2038431744,230,0,0,562036736,440,0,0,528482304,472,0,0,528482304,112,0,0,402653184,3632,0,0,199229440,4032,0,0,49283072,3808,0,0,62914560,960,0,0,117440512,224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7168,0,0,0,8064,0,0,0,15488,0,0,0,16256,0,0,0,384,0,0,0,14592,0,0,0,16128,0,0,0,0,0,0,0,15872,0,0,0,32512,0,0,0,16640,0,0,0,32512,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,0,0,8064,0,0,0,15872,0,0,0,128,0,0,0,4032,0,0,0,3648,0,0,0,4032,0,0,0,3840,0,0,0,224,0,0,0,864,0,0,67108864,992,0,0,117440512,992,0,0,66060288,280,0,0,7340032,120,0,0,476053504,508,0,0,385875968,952,0,0,998244352,242,0,0,264241152,78,0,0,1728053248,28,0,0,-1207959552,115,-1073741824,0,-671088640,68,-1073741824,0,1006632960,13,-2147483648,0,402653184,15,805306368,0,0,6,1744830464,24,0,0,-671088640,60,0,1,-1291845632,206,0,0,-436207616,230,0,0,1275068416,483,0,0,469762048,3281,0,0,404226048,40656,0,0,270401536,105072,0,0,3465216,118528,0,0,4058112,4058496,0,0,7989891,-977426944,0,0,1772419,-1783304192,0,0,253827,-560013312,0,0,106243,-555876352,0,0,7939,-555876352,0,0,6914,-557711360,0,0,2818,-2000683008,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
);

const vec3 color1 = vec3(0,84,232)/255.0;
const vec3 color2 = vec3(255.0)/255.0;

bool isOpaque1(int index) {
    int arrayIndex = index / 32;
    int bitPosition = 31 - (index % 32);
    return (opacityData1[arrayIndex] & (1 << bitPosition)) != 0;
}
bool isDecision1(int index) {
    int arrayIndex = index / 32;
    int bitPosition = 31 - (index % 32);
    return (colorDecisionData1[arrayIndex] & (1 << bitPosition)) != 0;
}

bool isOpaque2(int index) {
    int arrayIndex = index / 32;
    int bitPosition = 31 - (index % 32);
    return (opacityData2[arrayIndex] & (1 << bitPosition)) != 0;
}
bool isDecision2(int index) {
    int arrayIndex = index / 32;
    int bitPosition = 31 - (index % 32);
    return (colorDecisionData2[arrayIndex] & (1 << bitPosition)) != 0;
}

vec2 rotateUV(vec2 uv, float angle) {
    float c = -cos(angle);
    float s = sin(angle);
    mat2 rotMat = mat2(c, -s, s, c);
    vec2 center = vec2(0.5, 0.5);
    uv -= center;
    uv = rotMat * uv;
    uv += center;
    return uv;
}
vec2 rand(vec2 uv){
    vec2 random = vec2(fract(sin(dot(uv,vec2(15.15,154.15)))*10455.487))*2.0-1.0;
    return random;
}

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
    fragCoord.y = iResolution.y - fragCoord.y;
    vec2 uv = fragCoord.xy / iResolution.xy;
    //uv += pow(sin(iTime*10.0)*30.0,3.0)*0.0000002*rand(uv);
    uv += sin(pow(sin(rand(vec2(iTime*35.0)).x),2.0)*pow(sin(iTime*10.0)*10.0,3.0)*0.002*rotateUV(rand(vec2(-1.0)),iTime*4.))*0.01;
    uv.x += float(0.716<rand(vec2(floor(sin(iTime)*5.0))).x)*0.1*(float(rand(vec2(iTime)).x/4.0<mod(uv.y,sin(floor(sin(iTime)*5.0))/3.0))-0.5);

    ivec2 coord = ivec2(uv * vec2(WIDTH, HEIGHT));
    int index = coord.y * WIDTH + coord.x;

    if (isOpaque1(index)) {
        if (isDecision1(index)) {
            fragColor = vec4(color2, 1.0);
        }else{
            fragColor = vec4(color1, 1.0);
        }
    } else {
        if (isOpaque2(index)) {
            coord = ivec2(rotateUV(uv, iTime*1.0) * vec2(WIDTH, HEIGHT));
            index = coord.y * WIDTH + coord.x;
            if (isDecision2(index)) {
                fragColor = vec4(color1, 1.0);
            }else{
                fragColor = vec4(color2, 1.0);
            }
        } else {
            fragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }
}